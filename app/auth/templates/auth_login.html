<!-- app/auth/templates/auth_login.html -->
{% extends "main_template.html" %}
{% block title %}Login {% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>Login</h2>
    <form method="POST" action="{{ url_for('auth_bp.login', next=request.args.get('next')) }}">
        <div class="mb-3">
            <label class="form-label">Email:</label>
            <input type="text" name="email" class="form-control" required autocomplete="email">
        </div>
        <div class="mb-3">
            <label class="form-label">Password:</label>
            <input type="password" name="password" class="form-control" required autocomplete="current-password">
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
    </form>
    <p class="mt-3">Don't have an account? <a href="{{ url_for('auth_bp.register') }}">Register here</a></p>
    <p class="mt-3"><a href="{{ url_for('auth_bp.forgot_password') }}">Forgot Password?</a></p>
</div>

<script>
    // DEBUG SCRIPT # TODO: Remove this when login is ready
    document.addEventListener('DOMContentLoaded', function () {
   
        console.log('Login auto-fill script loaded.');
        // Function to toggle auto-fill
        window.toggleAutoFillLogin = function (enable) {
            localStorage.setItem('autoFillLogin', enable);
            console.log('Auto-fill login ' + (enable ? 'enabled' : 'disabled'));
            applyAutoFill(); // Call applyAutoFill after toggling
        };

        function applyAutoFill() {
            const autoFillEnabled = localStorage.getItem('autoFillLogin') === 'true';

            if (autoFillEnabled) {
                document.querySelector('input[name="email"]').value = 'demo.user@ai.broadcomms.net';
                document.querySelector('input[name="password"]').value = 'DemoP@ss123';
            }
        }

        applyAutoFill(); // Initial application of auto-fill

        // Development Default
        toggleAutoFillLogin(true)
        console.log('Login auto-fill script loaded. Use toggleAutoFillLogin(true) to enable or toggleAutoFillLogin(false) to disable.');
 
    });


</script>
{% endblock %}
